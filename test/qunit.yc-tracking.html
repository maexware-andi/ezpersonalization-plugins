<!DOCTYPE html>
<html>
<head>
    <link href="qunit/qunit.css" rel="stylesheet" type="text/css"/>
    <script src="qunit/qunit.js"></script>

    <script src="../src/yc-tracking.core.js"></script>
    <script src="../src/yc-tracking.magento.js"></script>
    <script src="../src/yc-tracking.init.js"></script>
</head>
<body>
<h1 id="qunit-header">YC tracking Unit Tests</h1>

<h2 id="qunit-banner"></h2>

<div id="qunit-testrunner-toolbar"></div>
<h2 id="qunit-userAgent"></h2>
<ol id="qunit-tests"></ol>
<div id="qunit-fixture"></div>
<script>
    (function () {

        module('Public API');

        // testing private methods, only for debugging purposes!
        test('userId call', function () {
            var library = new YcTracking();
            equal(library.getUserId(), library.getUserId(), 'Storing userId failed!');
        });

        // testing private methods, only for debugging purposes!
        test('userDetails call', function () {
            var library = new YcTracking();
            equal(library.getUserId(), library.getUserDetails().userId, 'Storing userId failed!');
        });

        test('private function call', function () {
            var library = new YcTracking();
            equal(library._executeEventCall, undefined, '_executeEventCall is exposed publicly!');
        });

        test('private variable', function () {
            var library = new YcTracking();
            equal(library.customerId, undefined, 'customerId is exposed publicly!');
        });

        test('trackClick call', function () {
            var library = new YcTracking();
            equal(library, library.trackClick(1, (Math.random() * 100) + 1), 'trackClick not called properly.');
        });

        test('trackRate call', function () {
            var library = new YcTracking();
            equal(library, library.trackRate(1, (Math.random() * 100) + 1, (Math.random() * 100) + 1), 'trackRate not called properly.');
        });

        test('trackBasket call', function () {
            var library = new YcTracking();
            equal(library, library.trackBasket(1, (Math.random() * 100) + 1, 'cat/subcat'), 'trackBasket not called properly.');
        });

        test('trackBuy call', function () {
            var library = new YcTracking();
            equal(library, library.trackBuy(1, (Math.random() * 100) + 1, (Math.random() * 10) + 1, Math.random() * 100, 'EUR'), 'trackBuy not called properly.');
        });

        test('trackLogin call', function () {
            var library = new YcTracking();
            equal(library, library.trackLogin((Math.random() * 100) + 1), 'trackLogin not called properly.');
        });

        test('trackRendered call', function () {
            var library = new YcTracking();
            equal(library, library.trackRendered(1, [(Math.random() * 100) + 1, (Math.random() * 100) + 1, (Math.random() * 100) + 1]), 'trackRendered not called properly.');
        });

        test('trackClickRecommended call', function () {
            var library = new YcTracking();
            equal(library, library.trackClickRecommended(1, (Math.random() * 100) + 1, 'SCENARIO with & chars'), 'trackClickRecommended not called properly.');
        });

        test('trackConsume call', function () {
            var library = new YcTracking();
            equal(library, library.trackConsume(1, (Math.random() * 100) + 1), 'trackConsume not called properly.');
        });

        test('trackBlacklist call', function () {
            var library = new YcTracking();
            equal(library, library.trackBlacklist(1, (Math.random() * 100) + 1), 'trackBlacklist not called properly.');
        });

        test('method chaining (trackClick) call', function () {
            var library = new YcTracking();
            equal(library, library.trackClick(1, (Math.random() * 100) + 1).trackClick(1, (Math.random() * 100) + 1), 'chaining not supported.');
        });
    }());
</script>
</body>
</html>
