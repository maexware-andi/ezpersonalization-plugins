/*! yc-tracking - v0.9.0 - 2015-02-24 - Soprex */
(function(){function t(t){"use strict";var e=function(){var t=904,e="//event.yoochoose.net/api/"+t,n=30,i="YCStore",o=function(){var t="yc_localStorageTest";try{return r.localStorage.setItem(t,t),r.localStorage.removeItem(t),!0}catch(e){return!1}},c=function(){return o()?JSON.parse(r.localStorage.getItem(i)):null},a=function(t){if(!o())throw"Local storage not supported!";r.localStorage.setItem(i,JSON.stringify(t))},u=function(){var t=function(){return(0|65536*(1+Math.random())).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},s=function(t){var e=c(),r=new Date;return r.setMinutes(r.getMinutes()+n),t||(t=e&&e.expires>(new Date).getTime()?e.userId:u()),a({userId:t,expires:r.getTime()}),t},f=function(t){var e,i="YCCookie",o=r.document.cookie,c=new Date,a=o.indexOf(" "+i+"=");return c.setMinutes(c.getMinutes()+n),t||(-1===a&&(a=o.indexOf(i+"=")),-1===a?t=u():(a=o.indexOf("=",a)+1,e=o.indexOf(";",a),-1===e&&(e=o.length),t=decodeURI(o.substring(a,e)))),r.document.cookie=i+"="+encodeURI(t)+"; expires="+c.toUTCString()+"; path=/",t},d=function(t){return o()?s(t):f(t)},h=function(t){var n=new Image(1,1);n.src=e+t};return this.resetUser=function(){return d(u())},this.trackClick=function(t,e,n){var r="/click/"+d()+"/"+t+"/"+e;return n&&(r+="?categorypath="+encodeURIComponent(n)),h(r),this},this.trackRate=function(t,e,n){var r="/rate/"+d()+"/"+t+"/"+e+"?rating="+n;return h(r),this},this.trackBasket=function(t,e,n){var r="/basket/"+d()+"/"+t+"/"+e;return n&&(r+="?categorypath="+encodeURIComponent(n)),h(r),this},this.trackBuy=function(t,e,n,r,i){var o="/buy/"+d()+"/"+t+"/"+e+"?fullprice="+(r+"").replace(",",".")+i+"&quantity="+n;return h(o),this},this.trackLogin=function(t){var e=d();return e!==t&&(h("/login/"+e+"/"+encodeURIComponent(t)),d(t,!0)),this},this.trackRendered=function(t,e){var n="/rendered/"+d()+"/"+t+"/";return Array.isArray(e)||(e=[e]),h(n+e.join(",")),this},this.trackClickRecommended=function(t,e,n){var r="/clickrecommended/"+d()+"/"+t+"/"+e+"?scenario="+encodeURIComponent(n);return h(r),this},this.trackConsume=function(t,e,n){return h("/consume/"+d()+"/"+t+"/"+e+(n?"?percentage="+n:"")),this},this.trackBlacklist=function(t,e){var n="/blacklist/"+d()+"/"+t+"/"+e;return h(n),this},this},n={validateInt:function(t,e){var n=/^-?\d+$/.test(t);if(!n&&e)throw"Param is not valid. Expected integer.";return n},validateFloat:function(t,e){var n=/^-?\d*(\.\d*)?$/.test(t);if(!n&&e)throw"Param is not valid. Expected number.";return n}};t.YcTracking=new e,t.YcValidator=n}function e(){"use strict"}var n=Function,r=new n("return this")(),i=function(n){return t(n),e(n),n.YcTracking};"function"==typeof define&&define.amd?define(function(){return i({})}):i(this)})(this);